<?xml version="1.0"?>
<!DOCTYPE binding SYSTEM "binding.dtd">
<binding direction="input">
	<mapping name="ha-jdbc" class="net.sf.hajdbc.DatabaseClusterFactory">
		<structure name="distributable" field="decorator" type="net.sf.hajdbc.distributable.DistributableDatabaseClusterDecorator" usage="optional">
			<value name="protocol" field="protocol" style="attribute" usage="optional" default="default-minimalthreads.xml"></value>
		</structure>
		<collection add-method="addSynchronizationStrategy" item-type="net.sf.hajdbc.SynchronizationStrategy"></collection>
		<collection add-method="addDatabaseCluster" item-type="net.sf.hajdbc.local.LocalDatabaseCluster"></collection>
	</mapping>
	<mapping name="sync" class="net.sf.hajdbc.SynchronizationStrategy" factory="net.sf.hajdbc.sync.SynchronizationStrategyFactory.createSynchronizationStrategy">
		<value name="id" set-method="setId" get-method="getId" style="attribute" ident="def"></value>
		<structure set-method="writeProperties" get-method="readProperties" unmarshaller="net.sf.hajdbc.util.PropertiesUnmarshaller"></structure>
	</mapping>
	<mapping name="cluster" class="net.sf.hajdbc.local.LocalDatabaseCluster" post-set="createConnectionFactories">
		<value name="id" field="id" style="attribute"></value>
		<value name="dialect" field="dialect" style="attribute" deserializer="net.sf.hajdbc.dialect.DialectFactory.createDialect" usage="optional" default="net.sf.hajdbc.dialect.DefaultDialect"></value>
		<value name="balancer" field="balancer" style="attribute" deserializer="net.sf.hajdbc.balancer.BalancerFactory.createBalancer"></value>
		<value name="default-sync" field="defaultSynchronizationStrategy" style="attribute" ident="ref"></value>
		<value name="min-threads" set-method="setMinThreads" style="attribute" usage="optional" default="0"></value>
		<value name="max-threads" set-method="setMaxThreads" style="attribute" usage="optional" default="100"></value>
		<value name="max-idle" set-method="setMaxIdle" style="attribute" usage="optional" default="60"></value>
		<collection add-method="addDatabase" item-type="net.sf.hajdbc.sql.DriverDatabase"></collection>
		<collection add-method="addDatabase" item-type="net.sf.hajdbc.sql.DataSourceDatabase"></collection>
		<collection add-method="addDatabase" item-type="net.sf.hajdbc.sql.pool.ConnectionPoolDataSourceDatabase"></collection>
		<collection add-method="addDatabase" item-type="net.sf.hajdbc.sql.pool.xa.XADataSourceDatabase"></collection>
	</mapping>
	<mapping class="net.sf.hajdbc.sql.AbstractDatabase" abstract="true">
		<value name="id" field="id" style="attribute"></value>
		<value name="weight" field="weight" style="attribute" usage="optional" default="1"></value>
		<structure field="properties" unmarshaller="net.sf.hajdbc.util.PropertiesUnmarshaller"></structure>
		<value name="user" field="user" usage="optional"></value>
		<value name="password" field="password" usage="optional"></value>
	</mapping>
	<mapping name="database" class="net.sf.hajdbc.sql.DriverDatabase" extends="net.sf.hajdbc.sql.AbstractDatabase">
		<value name="driver" field="driver" usage="optional"></value>
		<value name="url" field="url"></value>
		<structure map-as="net.sf.hajdbc.sql.AbstractDatabase"></structure>
	</mapping>
	<mapping name="datasource" class="net.sf.hajdbc.sql.DataSourceDatabase" extends="net.sf.hajdbc.sql.AbstractDatabase">
		<value name="name" field="name"></value>
		<structure map-as="net.sf.hajdbc.sql.AbstractDatabase"></structure>
	</mapping>
</binding>
