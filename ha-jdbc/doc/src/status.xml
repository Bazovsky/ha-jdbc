<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE status PUBLIC "-//APACHE//DTD Status V1.3//EN" "http://forrest.apache.org/dtd/status-v13.dtd">
<status>
	<developers>
		<person name="Paul Ferraro" email="ferraro@users.sourceforge.net" id="PF"/>
	</developers>
	<contexts>
		<context id="code" title="Changes to code"/>
		<context id="test" title="Changes to tests"/>
		<context id="doc" title="Changes to documentation"/>
		<context id="build" title="Changes to build process"/>
	</contexts>

	<changes>
		<!-- Add new releases here -->
			<!-- Some action types have associated images. By default, images are
			defined for 'add', 'fix', 'remove', 'update' and 'hack'. If you add
			src/documentation/resources/images/<foo>.jpg images, these will
			automatically be used for entries of type <foo>. -->
		<release version="1.0-rc-1" date="Unreleased">
			<action type="update" dev="PF" context="code">
				Optimized performance of balancers by replacing synchronize blocks with read/write locks from concurrent package.
			</action>
			<action type="update" dev="PF" context="code">
				Updated DifferentialSynchronizationStrategy to use PreparedStatements for inserts and deletions instead of using problematic updatable result set methods.
			</action>
			<action type="fix" dev="PF" context="code">
				Fixed DifferentialSynchronizationStrategy to drop and re-create unique keys on each table to prevent possible unique constraint violations.
			</action>
			<action type="update" dev="PF" context="code">
				Updated DifferentialSynchronizationStrategy to not assume that DatabaseMetaData returns primary and unique keys ordered by position.
			</action>
			<action type="update" dev="PF" context="code">
				Updated JGroups to version 2.2.8.
			</action>
			<action type="add" dev="PF" context="code">
				New compile/runtime dependency on Doug Lea's concurrent library.
			</action>
			<action type="update" dev="PF" context="doc">
				Updated documentation to use Forrest 0.7.
			</action>
			<action type="add" context="PF" dev="code">
				Added properties to database configuration to allow DataSources to define custom JNDI environment parameters and to allow Driver to define additional runtime parameters.
			</action>
			<action type="update" context="PF" dev="test">
				Migrated unit tests from TestNG to JUnit in order to utilize EasyMock.
			</action>
			<action type="add" dev="PF" context="test">
				Completed unit test suite.
			</action>
		</release>
		<release version="1.0-beta-8" date="April 27, 2005">
			<action type="add" dev="PF" context="code">
				Cluster state is now persisted locally so that it can be restored between application restarts.
			</action>
			<action type="add" dev="PF" context="code">
				Added customizable fetchSize property to each synchronization strategy to avoid out of memory errors when synchronizing large tables.
			</action>
			<action type="add" dev="PF" context="test">
				Added TestNG unit tests for Driver, Connection, Statement, and each balancer implementation.  Other tests are still in progress.
			</action>
			<action type="fix" dev="PF" context="code">
				Fixed issue with driver returning non-distributable connections when in distributable mode.
			</action>
			<action type="fix" dev="PF" context="code">
				Fixed issue in DifferentialSynchronizationStrategy with some updatable result set implementations where inserted rows were deleted again.
			</action>
			<action type="fix" dev="PF" context="code">
				Fixed ClassCastException in Connection.releaseSavepoint(Savepoint) and Connection.rollback(Savepoint) methods.
			</action>
			<action type="fix" dev="PF" context="code">
				Minor fixes to zero weight handling in random and load balancers.
			</action>
			<action type="fix" dev="PF" context="code">
				Corrected German translation of error messages (thanks to Oezcan Acar).
			</action>
			<action type="update" dev="PF" context="code">
				executeWriteToDatabase() will now throw SQLException for Statements and ResultSets if some valid databases fail while others succeed and auto-commit is off, giving the client the opportunity to rollback the current transaction.
			</action>
			<action type="update" dev="PF" context="code">
				Connection.isReadOnly() was changed from executeReadFromDatabase() to executeReadFromDriver().
			</action>
			<action type="update" dev="PF" context="code">
				Refactored java.sql.* proxy classes.
			</action>
			<action type="update" dev="PF" context="code">
				Updated JiBX to version 1.0-rc-0.
			</action>
		</release>
		<release version="1.0-beta-7" date="April 5, 2005">
			<action type="fix" dev="PF" context="code">
				Fixed buggy weighted round-robin algorithm.
			</action>
			<action type="fix" dev="PF" context="code">
				Round-robin balancer now handles databases with 0 weight properly.
			</action>
		</release>
		<release version="1.0-beta-6" date="March 31, 2005">
			<action type="update" dev="PF" context="code">
				Database cluster now specifies 1 of 4 different strategies for balancing read requests: simple, random, round-robin, or load.
			</action>
			<action type="update" dev="PF" context="code">
				A database can define a weight to affect how it is prioritized by the balancer.
			</action>
			<action type="update" dev="PF" context="code">
				In distributed environment, a database cluster will get its initial state from the JGroups group coordinator.
			</action>
			<action type="fix" dev="PF" context="code">
				Fixed bug where auto (i.e. non-manual) database deactivation behaved locally even if environment is distributed.
			</action>
			<action type="fix" dev="PF" context="code">
				Fixed bug where synchronization strategies will fail if foreign key constraints have names that require quoting (e.g. $1, $2).
			</action>
			<action type="update" dev="PF" context="code">
				Lots of refactored code.  Most notably, the HA-JDBC driver has moved to net.sf.hajdbc.sql.Driver
			</action>
			<action type="update" dev="PF" context="code">
				Protocol parameter is now optional for distributable clusters.
			</action>
			<action type="add" dev="PF" context="code">
				Added error message translations for German, Spanish, French, Italian, and Portuguese (thanks to AltaVista Babel Fish).
			</action>
			<action type="add" dev="PF" context="code">
				Added error message for tables without primary keys in DifferentialSynchronizationStrategy.
			</action>
		</release>
		<release version="1.0-beta-5" date="March 3, 2005">
			<action type="update" dev="PF" context="code">
				Added better data type support for SynchronizationStrategy properties.
			</action>
			<action type="fix" dev="PF" context="code">
				Fixed Java 1.4 compatibility.
			</action>
		</release>
		<release version="1.0-beta-4" date="February 18, 2005">
			<action type="update" dev="PF" context="code">
				getActiveDatabases() and getInactiveDatabases() no longer throw SQLException
			</action>
			<action type="update" dev="PF" context="code">
				Configuration DTD updated:  Synchronization strategies and properties are now explicitly defined per cluster.
			</action>
			<action type="add" dev="PF" context="code">
				Added getSynchronizationStrategies() method to cluster management interface.
			</action>
			<action type="update" dev="PF" context="code">
				Changed symantics of activate(...) methods on management interface:  activate(String, String) uses synchronization strategy identifier instead of class name; activate(String) now activates a database without synchronizing.
			</action>
			<action type="remove" dev="PF" context="code">
				PassiveSynchronizationStrategy is obsolete.  Use activate(String) instead.
			</action>
			<action type="update" dev="PF" context="code">
				synchronize() method of SynchronizationStrategy interface no longer uses DatabaseClusterDescriptor.
			</action>
			<action type="fix" dev="PF" context="code">
				Fixed various bugs in documentation and javadoc.
			</action>
		</release>
		<release version="1.0-beta-3" date="February 7, 2005">
			<action type="add" dev="PF" context="code">
				All log/exception messages are now localized.
			</action>
			<action type="update" dev="PF" context="code">
				Driver is no longer required when defining a driver-based cluster since underlying driver already be registered via the jdbc.drivers system property.
			</action>
			<action type="fix" dev="PF" context="code">
				Fixed bug in SQLException when nested exception chain is already initialized.
			</action>
		</release>
		<release version="1.0-beta-2" date="January 8, 2005">
			<action type="add" dev="PF" context="code">
				Added JMX interface to DatabaseCluster to allow administration of each cluster.
			</action>
			<action type="update" dev="PF" context="code">
				Refactored cluster initialization and management.
			</action>
			<action type="update" dev="PF" context="code">
				Distributable behavior implemented using command pattern.
			</action>
			<action type="update" dev="PF" context="code">
				Restructured configuration DTD adding new synchronization-related cluster properties.
			</action>
			<action type="update" dev="PF" context="code">
				Refactored distributable behavior to support activation.
			</action>
			<action type="add" dev="PF" context="code">
				Added ability to activate a failed database.
			</action>
			<action type="add" dev="PF" context="code">
				Created database synchronization strategies used during activation.
			</action>
			<action type="update" dev="PF" context="code">
				Allow simple names for DriverManager-based database cluster.
			</action>
			<action type="update" dev="PF" context="code">
				Enhanced large object support.
			</action>
			<action type="update" dev="PF" context="code">
				Upgraded Forrest documentation to v0.6.
			</action>
		</release>
		<release version="1.0-beta-1" date="October 1, 2004">
			<action type="fix" dev="PF" context="code">
				Fixed bug in connection.rollback()
			</action>
			<action type="fix" dev="PF" context="code">
				Fixed logic in PreparedStatement/CallableStatement.setXXXStream() and ResultSet.updateXXXStream() methods
			</action>
			<action type="update" dev="PF" context="code">
				Optimized asynchronous execution of write operations.
			</action>
			<action type="update" dev="PF" context="code">
				Improved consistancy of cluster when autocommit is true.
			</action>
			<action type="update" dev="PF" context="code">
				Upgraded JGroups to v2.2.7
			</action>
			<action type="update" dev="PF" context="code">
				Prevent multiple logging of database deactivation
			</action>
		</release>
		<release version="1.0-alpha-3" date="August 30, 2004">
			<action type="update" dev="PF" context="code">
				Configuration DTD is now PUBLIC
			</action>
			<action type="update" dev="PF" context="code">
				Upgraded JGroups to v2.2.6
			</action>
			<action type="fix" dev="PF" context="code">
				Fixed thread safety bug in SQLProxy.executeWrite()
			</action>
			<action type="update" dev="PF" context="code">
				Changed license to LGPL, added license details to source code
			</action>
			<action type="remove" dev="PF" context="code">
				Removed obsolete RowSetProxy class, javax.sql.RowSet implementation are implicitly supported
			</action>
			<action type="update" dev="PF" context="code">
				Refactored package names to reflect project name
			</action>
			<action type="update" dev="PF" context="code">
				Replaced CHANGES.txt with this page
			</action>
		</release>
		<release version="1.0-alpha-2" date="July 17, 2004">
			<action type="add" dev="PF" context="code">
				Added ability specify location of configuration file using a system property
			</action>
			<action type="update" dev="PF" context="code">
				Extended classpath search for configuration file to include system classpath
			</action>
			<action type="fix" dev="PF" context="code">
				Fixed DataSource proxy initialization
			</action>
			<action type="update" dev="PF" context="code">
				DriverProxy now expects the cluster name to match the JDBC url
			</action>
			<action type="add" dev="PF" context="code">
				Several refactorings affecting configuration dtd
			</action>
			<action type="fix" dev="PF" context="code">
				Fixed bug in clean target of ant build file
			</action>
		</release>
		<release version="1.0-alpha-1" date="July 14, 2004">
			<action type="add" dev="PF" context="code">
				Initial Release
			</action>
		</release>
	</changes>

	<todo>
		<actions priority="high">
			<action type="add" context="code" dev="PF">
				TestNG unit test suite. (in progress)
			</action>
			<action type="add" context="code" dev="PF">
				Add more FAQs.
			</action>
			<action type="add" context="code" dev="PF">
				Complete documentation.
			</action>
		</actions>
		<actions priority="medium">
			<action type="add" context="code" dev="PF">
				Support for modifying HA-JDBC configuration at runtime.
				Workaround is to create "placeholder" DataSources that can be defined and activated as needed.
			</action>
			<action type="add" context="code" dev="PF">
				Support for using native database replication capabilities.
			</action>
		</actions>
	</todo>

</status>
